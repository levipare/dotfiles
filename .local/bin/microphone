#!/usr/bin/bash

function get_volume() {
    echo $(wpctl get-volume @DEFAULT_SOURCE@ | echo $(grep -Po '(\d+.\d+)') "*100/1" | bc)%
}

case $1 in
    up)
        wpctl set-volume @DEFAULT_SOURCE@ 1%+
        notify-send -r 11112 "$(get_volume) Microphone Volume"
    ;;
    down)
        wpctl set-volume @DEFAULT_SOURCE@ 1%-
        notify-send -r 11112 "$(get_volume) Microphone Volume"    
    ;;
    mute)
        wpctl set-mute @DEFAULT_SOURCE@ toggle
        if wpctl get-volume @DEFAULT_SOURCE@ | grep "MUTED"
        then
            notify-send -r 11112 "Muted Microphone"
        else
            notify-send -r 11112 "Unmuted Microphone"
        fi
    ;;
    *)
        get_volume
    ;;
esac
